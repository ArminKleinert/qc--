
# ------------------------------------------------------------------ 
# paths
# ------------------------------------------------------------------ 

TOP    =    ..
LIBDIR =    ../lib
BINDIR =    ../bin
MANDIR =    ../man

< $TOP/config/noweb.mk

# ------------------------------------------------------------------  
# high level targets
# ------------------------------------------------------------------  

test:VQ:        ../bin/qc-- fp regr
                for f in *.c--; do mk "`basename $f .c--`.test"; done


# ------------------------------------------------------------------ 
# useful targets to create test results
# ------------------------------------------------------------------ 

%.2:            %.c--
                ../bin/qc-- -check $prereq 2> $target || true

%.test:V:       %.c--         
		SELF=$stem.c--
		BASE=$stem
		export SELF BASE
                sed -n 's!^///!!p' $SELF | sh -x || true

# ------------------------------------------------------------------  
# sources generated from noweb sources
# ------------------------------------------------------------------  

fp:             test.nw
                $NOTANGLE -R$target $prereq > $target
                chmod +x $target
                
regr:           test.nw
                $NOTANGLE -R$target $prereq > $target
                chmod +x $target

html:V:         test.html
